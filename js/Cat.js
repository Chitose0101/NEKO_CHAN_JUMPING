class Cat extends Entity{
    /*
    ﾈｺﾁｬﾝのクラス
    */

    constructor(display_height, display_width, x, y) {
        /*
        コントラスタ
        */
        
        //親コントラスタの呼び出し
        super(display_height, display_width, x, y);
        //ﾈｺﾁｬﾝ生成から何フレーム経過したか
        this.timer = 0
        //ジャンプ中か
        this.is_jumping = false;
        //ジャンプしてから何フレーム経過したか
        this.jump_timer = 0;
    }

    jump() {
        /*
        ジャンプ
        */
        if (this.is_jumping == false) {
            this.is_jumping = true;
        }
    }

    jump_height(jump_timer=this.jump_timer) {
        /*
        ジャンプの高さを算出
        */

        //重力加速度g、初速度v、時間t
        const g = 0.9;
        const v = 9;
        let t = jump_timer;

        return parseInt(v*t - g*t*t/2);
    }

    update_jump_timer() {
        /*
        jump_timerの更新
        */

        //もしジャンプ中でなければなら更新しない
        if (this.is_jumping == false) {
            return
        }
        
        //もし次の高さが0より高ければ、増加
        if (this.jump_height(this.jump_timer + 1) > 0) {
            this.jump_timer += 1;

        //そうでなければ、0
        } else {
            this.jump_timer = 0;
            this.is_jumping = false;
        }
    }

    update_collider() {
        /*
        コライダーの更新
        timer:ゲーム開始から何フレーム経過したか
        */

        //y座標の更新
        this.y = this.display_height - this.height - this.jump_height() - 1;

        //jump_timerの更新
        this.update_jump_timer()

        //アニメーションの更新
        this.skin = (this.timer % 10 > 4)? this.skins[0] : this.skins[1];

        //timer更新
        this.timer ++;
    }
    
    set_collider () {
        /*
        コライダーの設定
        */

        //コライダーの最大サイズの指定(デフォルト16*16)
        this.height = 16;
        this.width = 16;

        //コライダーの設定
        this.collider = [
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0],
            [0,0,0,0,1,1,1,0,0,0,1,1,0,0,0,0],
            [0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0],
            [0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0],
            [0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0],
            [0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0],
            [0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0],
            [0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0],
            [0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0],
            [0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0],
            [0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        ]

        //スキンの設定
        this.skins = [[
                [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
                [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
                [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
                [0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0],
                [0,0,0,0,1,2,1,0,0,0,1,2,1,0,0,0],
                [0,0,0,1,2,2,2,1,1,1,2,2,1,0,0,0],
                [0,0,0,1,2,2,2,2,2,2,2,2,1,0,0,0],
                [0,0,1,2,2,2,2,2,2,2,2,2,2,1,0,0],
                [0,0,1,2,2,2,2,2,2,2,2,2,2,1,0,0],
                [0,1,1,2,2,2,1,2,2,2,1,2,2,1,0,0],
                [1,2,1,2,2,2,1,2,2,2,1,2,2,1,0,0],
                [1,2,1,1,2,2,2,2,2,2,2,2,1,0,0,0],
                [0,1,2,2,1,2,2,1,1,1,1,1,0,0,0,0],
                [0,1,2,2,2,2,2,1,0,0,0,0,0,0,0,0],
                [0,1,2,1,2,1,2,1,0,0,0,0,0,0,0,0],
                [0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0],
            ],[
                [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
                [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
                [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
                [0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0],
                [0,0,0,0,1,2,1,0,0,0,1,2,1,0,0,0],
                [0,0,0,1,2,2,2,1,1,1,2,2,1,0,0,0],
                [0,0,0,1,2,2,2,2,2,2,2,2,1,0,0,0],
                [0,0,1,2,2,2,2,2,2,2,2,2,2,1,0,0],
                [0,0,1,2,2,2,2,2,2,2,2,2,2,1,0,0],
                [0,1,1,2,2,2,1,2,2,2,1,2,2,1,0,0],
                [1,2,1,2,2,2,1,2,2,2,1,2,2,1,0,0],
                [1,2,1,1,2,2,2,2,2,2,2,2,1,0,0,0],
                [0,1,2,2,1,2,2,1,1,1,1,1,0,0,0,0],
                [0,1,2,2,2,2,2,1,0,0,0,0,0,0,0,0],
                [0,1,1,2,1,2,1,1,0,0,0,0,0,0,0,0],
                [0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0], 
            ]
        ];
        this.skin = this.skins[0];
    }
}